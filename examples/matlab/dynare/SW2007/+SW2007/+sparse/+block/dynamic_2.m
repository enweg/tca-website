function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(9, 1);
  y(50)=y(51)*1/(params(10)/(1-params(10)));
  T(1)=(1/(1+params(6)/100))^(-1)*(1+params(38)/100)^params(13);
  T(2)=T(1)-(1-params(12));
  T(3)=1-(1-params(12))/(1+params(38)/100);
  T(4)=params(17)*((1-params(9))/params(9)*T(2)/(params(9)^params(9)*(1-params(9))^(1-params(9))/(params(17)*T(2)^params(9)))^(1/(1-params(9))))^(params(9)-1);
  T(5)=(1+params(38)/100)*T(3)*T(4);
  y(56)=y(74)+y(54)*(1-params(39)-T(5))+y(55)*T(5)+y(50)*T(2)*T(4);
  residual(1)=(y(51))-(y(58)+y(57)-y(52));
  residual(2)=(y(52))-(y(50)+y(39));
  T(6)=(1-params(14)/(1+params(38)/100))/(params(13)*(1+params(14)/(1+params(38)/100)));
  T(7)=params(14)/(1+params(38)/100)/(1+params(14)/(1+params(38)/100));
  T(8)=(params(13)-1)*T(4)*(1-params(9))*1/params(23)/params(9)*T(2)/(1-params(39)-T(5))/(params(13)*(1+params(14)/(1+params(38)/100)));
  residual(3)=(y(54))-(y(73)+y(14)*T(7)+y(94)*1/(1+params(14)/(1+params(38)/100))+(y(57)-y(97))*T(8)-y(59)*T(6));
  T(9)=(1+params(38)/100)^2;
  T(10)=params(11)*T(9);
  residual(4)=(y(79))-(y(39)*(1-T(3))+y(55)*T(3)+y(75)*T(10)*T(3));
  T(11)=1/(1-params(14)/(1+params(38)/100));
  T(12)=params(14)/(1+params(38)/100)/(1-params(14)/(1+params(38)/100));
  residual(5)=(y(58))-(y(57)*params(22)+y(54)*T(11)-y(14)*T(12));
  T(13)=1/(1+params(6)/100)*(1+params(38)/100)^(-params(13));
  T(14)=(1+params(38)/100)*T(13);
  residual(6)=(y(55))-(y(75)+1/(1+T(14))*(y(53)*1/T(10)+y(15)+y(95)*T(14)));
  residual(7)=(y(72))-(params(9)*y(51)+(1-params(9))*y(58));
  residual(8)=(y(53))-(y(73)*1/T(6)-y(59)+y(91)*T(2)/T(1)+y(93)*(1-params(12))/T(1));
  residual(9)=(y(56))-(params(17)*(y(72)+params(9)*y(52)+(1-params(9))*y(57)));
if nargout > 3
    g1_v = NaN(35, 1);
g1_v(1)=(-1);
g1_v(2)=(-(1-T(3)));
g1_v(3)=(-T(7));
g1_v(4)=T(12);
g1_v(5)=(-(1/(1+T(14))));
g1_v(6)=(-1);
g1_v(7)=1;
g1_v(8)=(-(1-params(9)));
g1_v(9)=1;
g1_v(10)=1;
g1_v(11)=(-(params(17)*params(9)));
g1_v(12)=T(6);
g1_v(13)=1;
g1_v(14)=1;
g1_v(15)=1;
g1_v(16)=(-T(11));
g1_v(17)=1-params(39)-T(5);
g1_v(18)=(-T(3));
g1_v(19)=1;
g1_v(20)=T(5);
g1_v(21)=1;
g1_v(22)=(-(1/(params(10)/(1-params(10)))));
g1_v(23)=(-params(9));
g1_v(24)=1/(params(10)/(1-params(10)))*T(2)*T(4);
g1_v(25)=(-(1/T(10)*1/(1+T(14))));
g1_v(26)=1;
g1_v(27)=(-1);
g1_v(28)=(-T(8));
g1_v(29)=(-params(22));
g1_v(30)=(-(params(17)*(1-params(9))));
g1_v(31)=(-(1/(1+params(14)/(1+params(38)/100))));
g1_v(32)=(-(T(14)*1/(1+T(14))));
g1_v(33)=(-(T(2)/T(1)));
g1_v(34)=(-((1-params(12))/T(1)));
g1_v(35)=T(8);
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 9, 27);
end
end
